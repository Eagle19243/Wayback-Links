/*!
 * =============================================================
 * wayback-links v1.0.0 - Wayback Links
 * https://github.com/internetarchive/wayback-links#readme
 *
 * (c) 2017 - Eagle19243
 * =============================================================
 */

!function(t,e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):t.Wayback_links=e(t.jQuery)}(this,function(t){var e=["https?://web.archive.org/*"];return function(){function t(t){var e=/^https?:/,r=/:/;return Boolean(t)&&(e.test(t)||!r.test(t))}function r(){return"WL_"+Math.random().toString(36).substr(2,9)}function n(t,e,r){var n=document.createElement("li"),a=document.createElement("div"),i=document.createElement("a");i.setAttribute("class","waybackLinks WLItem"),i.href=r,i.innerHTML=e,a.appendChild(i),n.appendChild(a),t.appendChild(n)}function a(t){return t<10&&(t="0"+t),t}function i(t){var e=new Date(t);if(isNaN(e)&&(e=new Date(t.replace(/ /g,"T")),isNaN(e)))return"Invalid date";var r="";return r+=e.getUTCFullYear(),r+=a(e.getUTCMonth()+1),r+=a(e.getUTCDate()),r+=a(e.getUTCHours()),r+=a(e.getUTCMinutes()),r+=a(e.getUTCSeconds())}function o(t){var e=i(t),r=e.substr(0,4)+"-"+e.substr(4,2)+"-"+e.substr(6,2);return"000000"!=e.substr(8,6)&&(r+=" "+e.substr(8,2)+":"+e.substr(10,2)+":"+e.substr(12,2)),r}function u(t){var e=new RegExp("(?:https?://)?(?:www\\.)?((?:[A-Za-z0-9_\\.])+)(?:/.*)?","i"),r=t.match(e);if(r&&r.length>1){var n=r[1];return n.length>15?n.substr(0,15)+"...":n}return"unknown archive"}function s(){p&&(p.setAttribute("aria-hidden","true"),p=null)}function c(t,e){try{return t.getAttribute(e).trim()}catch(t){return""}}var d={"date-published":"Get near page creation date ","date-modified":"Get near page modified date "};const l="https://web.archive.org/web/";var p;Array.prototype.indexOf||(Array.prototype.indexOf=function(t){for(var e=this.length;e--;)if(this[e]===t)return e;return-1}),document.addEventListener("DOMContentLoaded",function(){for(var a=document.getElementsByTagName("meta"),f={},h=0;h<a.length;h++){var m=c(a[h],"item-prop");if(m in d){var b=c(a[h],"content");f[m]={linkstr:"",printstr:""},f[m].linkstr=i(b),f[m].printstr=o(b)}}for(var v=document.getElementsByTagName("a"),h=0;h<v.length;h++){var g=c(v[h],"href");if(0==!g.search("http")){var k=window.location,y=k.protocol+"//"+k.host;0==!g.search("/|../|./")&&(y+="/"),g=y+g}var A=c(v[h],"data-original-url"),w=Boolean(A);w||(A=g);var E=c(v[h],"data-version-url"),L=Boolean(E);!L&&w&&(E=g);var C=c(v[h],"data-version-date"),T=Boolean(C),W=new RegExp("(?:"+WLuriPatternsToExclude.concat(e).join(")|(?:")+")");if(v[h].href.length>0&&(" "+v[h].className+" ").indexOf(" waybackLinks ")<0&&(Object.keys(f).length>0||w||L||T)&&!W.test(g)&&t(g)){var B=r(),x=document.createElement("span");x.setAttribute("role","navigation"),x.setAttribute("aria-label","WLElement");var N=document.createElement("ul"),M=document.createElement("li");M.setAttribute("aria-label","WLOuter");var j=document.createElement("a");j.href="",j.setAttribute("aria-haspopup","true"),j.setAttribute("class","waybackLinks dropDownButton WLArrow"),j.setAttribute("aria-controls",B);var D=document.createElement("div");D.setAttribute("class","waybackLinks dropDownButton WLIcon");var O=document.createElement("ul");O.setAttribute("class","WLMenu"),O.id=B,O.setAttribute("aria-hidden","true");var U=document.createElement("li");U.setAttribute("class","WLTitle"),U.innerHTML="Wayback Links",O.appendChild(U);for(m in f){var G=l+f[m].linkstr+"/"+A;n(O,d[m]+f[m].printstr,G)}if(T){var I=i(C),G=l+I+"/"+A;n(O,"Get near link date "+o(C),G)}(L||w)&&n(O,"Get from "+u(E),E),w&&n(O,"Get at current date",A),M.appendChild(j),M.appendChild(O),N.appendChild(M),x.appendChild(N),j.parentNode.insertBefore(D,j),j.onclick=function(t){var e=document.getElementById(this.getAttribute("aria-controls")),r="true"==e.getAttribute("aria-hidden");return s(),r?(e.setAttribute("aria-hidden","false"),p=e):(e.setAttribute("aria-hidden","true"),p=null),t.stopPropagation(),!1},v[h].parentNode.insertBefore(x,v[h].nextSibling)}}document.onclick=s},!1)}(),Wayback_links});