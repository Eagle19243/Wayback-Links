/*!
 * =============================================================
 * wayback-links v1.0.0 - Wayback Links
 * https://github.com/internetarchive/wayback-links#readme
 *
 * (c) 2017 - Eagle19243
 * =============================================================
 */

!function(t,e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):t.Wayback_links=e(t.jQuery)}(this,function(t){function e(t){var e=/^https?:/,r=/:/;return Boolean(t)&&(e.test(t)||!r.test(t))}function r(){return"WL_"+Math.random().toString(36).substr(2,9)}function n(t,e,r){var n=document.createElement("li"),a=document.createElement("div"),i=document.createElement("a");i.setAttribute("class","waybackLinks WLItem"),i.href=r,i.innerHTML=e,a.appendChild(i),n.appendChild(a),t.appendChild(n)}function a(t){return t<10&&(t="0"+t),t}function i(t){var e=new Date(t);if(isNaN(e)&&(e=new Date(t.replace(/ /g,"T")),isNaN(e)))return"Invalid date";var r="";return r+=e.getUTCFullYear(),r+=a(e.getUTCMonth()+1),r+=a(e.getUTCDate()),r+=a(e.getUTCHours()),r+=a(e.getUTCMinutes()),r+=a(e.getUTCSeconds())}function o(t){var e=i(t),r=e.substr(0,4)+"-"+e.substr(4,2)+"-"+e.substr(6,2);return"000000"!=e.substr(8,6)&&(r+=" "+e.substr(8,2)+":"+e.substr(10,2)+":"+e.substr(12,2)),r}function u(t){var e=new RegExp("(?:https?://)?(?:www\\.)?((?:[A-Za-z0-9_\\.])+)(?:/.*)?","i"),r=t.match(e);if(r&&r.length>1){var n=r[1];return n.length>15?n.substr(0,15)+"...":n}return"unknown archive"}function s(){h&&(h.setAttribute("aria-hidden","true"),h=null)}function d(t,e){try{return t.getAttribute(e).trim()}catch(t){return""}}var c=["https?://web.archive.org/*"],l={"date-published":"Get near page creation date ","date-modified":"Get near page modified date "};const p="https://web.archive.org/web/";var h;return"undefined"==typeof WLuriPatternsToExclude&&(WLuriPatternsToExclude=["https?://archive.org*"]),Array.prototype.indexOf||(Array.prototype.indexOf=function(t){for(var e=this.length;e--;)if(this[e]===t)return e;return-1}),document.addEventListener("DOMContentLoaded",function(){for(var t=document.getElementsByTagName("meta"),a={},f=0;f<t.length;f++){var m=d(t[f],"item-prop");if(m in l){var b=d(t[f],"content");a[m]={linkstr:"",printstr:""},a[m].linkstr=i(b),a[m].printstr=o(b)}}for(var v=document.getElementsByTagName("a"),f=0;f<v.length;f++){var g=d(v[f],"href");if(0==!g.search("http")){var k=window.location,y=k.protocol+"//"+k.host;0==!g.search("/|../|./")&&(y+="/"),g=y+g}var A=d(v[f],"data-original-url"),w=Boolean(A);w||(A=g);var E=d(v[f],"data-version-url"),L=Boolean(E);!L&&w&&(E=g);var C=d(v[f],"data-version-date"),T=Boolean(C),W=new RegExp("(?:"+WLuriPatternsToExclude.concat(c).join(")|(?:")+")");if(v[f].href.length>0&&(" "+v[f].className+" ").indexOf(" waybackLinks ")<0&&(Object.keys(a).length>0||w||L||T)&&!W.test(g)&&e(g)){var x=r(),B=document.createElement("span");B.setAttribute("role","navigation"),B.setAttribute("aria-label","WLElement");var N=document.createElement("ul"),M=document.createElement("li");M.setAttribute("aria-label","WLOuter");var j=document.createElement("a");j.href="",j.setAttribute("aria-haspopup","true"),j.setAttribute("class","waybackLinks dropDownButton WLArrow"),j.setAttribute("aria-controls",x);var D=document.createElement("div");D.setAttribute("class","waybackLinks dropDownButton WLIcon");var O=document.createElement("ul");O.setAttribute("class","WLMenu"),O.id=x,O.setAttribute("aria-hidden","true");var U=document.createElement("li");U.setAttribute("class","WLTitle"),U.innerHTML="Wayback Links",O.appendChild(U);for(m in a){var G=p+a[m].linkstr+"/"+A;n(O,l[m]+a[m].printstr,G)}if(T){var I=i(C),G=p+I+"/"+A;n(O,"Get near link date "+o(C),G)}(L||w)&&n(O,"Get from "+u(E),E),w&&n(O,"Get at current date",A),M.appendChild(j),M.appendChild(O),N.appendChild(M),B.appendChild(N),j.parentNode.insertBefore(D,j),j.onclick=function(t){var e=document.getElementById(this.getAttribute("aria-controls")),r="true"==e.getAttribute("aria-hidden");return s(),r?(e.setAttribute("aria-hidden","false"),h=e):(e.setAttribute("aria-hidden","true"),h=null),t.stopPropagation(),!1},v[f].parentNode.insertBefore(B,v[f].nextSibling)}}document.onclick=s},!1)});